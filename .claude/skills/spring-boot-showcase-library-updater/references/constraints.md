# Spring Boot Showcase プロジェクト制約事項

このドキュメントは、spring-boot-showcaseプロジェクトでライブラリを更新する際の制約事項をまとめています。

## バージョン制約

### Spring Boot

- **現在のバージョン**: 3.x系
- **制約**: Spring Boot 4系には更新しない
- **理由**: プロジェクトの方針としてSpring Boot 3系を維持する
- **更新範囲**: 3.x系の最新パッチ・マイナーバージョンまで

### 依存関係のある更新

以下のライブラリは相互に依存関係があり、単独での更新ができない場合があります：

#### gRPC と Protobuf

- **gRPC**: 特定のProtobufバージョンに依存
- **Protobuf**: gRPCの要求バージョンに合わせる必要がある
- **確認方法**: Maven CentralでgRPCの依存関係を確認
- **例**: gRPC 1.78.0はProtobuf 3.25.8を要求（4.xは非互換）

#### Spring Boot と関連ライブラリ

- **springdoc-openapi**: Spring Bootのメジャーバージョンに対応
  - Spring Boot 3.x → springdoc-openapi 2.x
  - Spring Boot 4.x → springdoc-openapi 3.x

#### OpenTelemetry

- **制約**: alpha版は破壊的変更が含まれる可能性がある
- **対応**: 段階的に更新し、テストで互換性を確認
- **例**: 2.23.0-alphaまでは互換性あり、2.24.0-alphaで非互換

## テスト要件

### 必須テスト

- 各ライブラリ更新後に `./gradlew clean test` を実行
- 全てのテストが成功することを確認
- テストケースの修正は、ライブラリの非推奨機能や削除された機能の場合のみ

### テスト失敗時の対応

1. エラーメッセージを確認
2. 依存関係の問題であれば、バージョンを戻す
3. 破壊的変更であれば、その旨を記録して更新を見送る

## コミットポリシー

### ブランチ戦略

- mainブランチから作業ブランチを作成
- ブランチ名例: `feature/update-libraries-*`

### コミット単位

- 意味のある単位でグルーピング化
- 各コミットは独立してテスト済み
- 関連するライブラリはまとめてコミット可能

### コミットメッセージ

```
Update [ライブラリ名] to [バージョン]

- Update [ライブラリ名] from [旧バージョン] to [新バージョン]
- [追加の変更があれば記述]
- All tests passed successfully

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

## プルリクエスト

### PR本文構成

```markdown
## 概要
[更新の概要]

## 更新内容（N個）
[カテゴリごとにグルーピング]

## 更新を見送ったライブラリ
[理由とともに記載]

## テスト結果
✅ 全てのテストが成功

## その他
- 意味のある単位でコミットをグルーピング化
- 各コミットは独立してテスト済み
- 破壊的変更なし
```